---
layout: post
title: vbox ağ sorunları
---

DRAFT

Ayarlar->Ağ yolunu takip ederek

	Bağdaştırıcı 1: NAT
	Bağdaştırıcı 2: Host-only adapter (vboxnet0)

(sanırım kaynağı klonlama olan) IP alamama/çakışma sorununu iki farklı şekilde çözmek mümkün,

1. udev ayarları
2. interface + dhc dhclient in boot anında başlatılması

## YÖNTEM 1: udev ayarları

1. `$ ifconfig | grep HWad` ile eth* lerin MAC adreslerini öğrenelim

		$ ifconfig | grep HWad
		eth0      Link encap:Ethernet  HWaddr 08:00:27:ca:10:ad
		eth1      Link encap:Ethernet  HWaddr 08:00:27:e8:be:f2

2. şimdi `/etc/udev/rules.d/70-persistent-net.rules` dosyasını aşağıdaki gibi oluşturalım: [gist-466520](http://gist.github.com/466520),

		# This file was automatically generated by the /lib/udev/write_net_rules
		# program run by the persistent-net-generator.rules rules file.
		#
		# You can modify it, as long as you keep each rule on a single line.

		# PCI device 0x8086:0x100e (e1000)
		SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="08:00:27:ca:10:ad", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"

		# PCI device 0x8086:0x100e (e1000)
		SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="08:00:27:e8:be:f2", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"

3. `/etc/udev/rules.d/75-persistent-net-generator.rules` dosyasına aşağıdaki satırları ekle: [gist-466496](http://gist.github.com/466506)

		# ignore VirtualBox virtual interfaces
		ATTR{address}=="08:00:27:*", GOTO="persistent_net_generator_end"

4. `/etc/network/interface` içeriği şöyle olmalıdır: [gist-466499](http://gist.github.com/466499),

		auto lo eth0 eth1
		iface lo inet loopback

		iface eth0 inet static
			address 10.0.2.15
			netmask 255.255.255.0
			gateway 10.0.2.2

		iface eth1 inet static
			address 192.168.56.101 # FIXME: beni uygun bir degerle guncelle
			netmask 255.255.255.0
			gateway 192.168.56.1

5. reboot

## YÖNTEM 2: interface + dhc dhclient in boot anında başlatılması

1. `$ sudo rm -rf /etc/udev/rules.d/70-persistent-net.rules` dosyasını sil

2. YÖNTEM 1-Adım 2-3-4 yerine getir

3. dhclient in boot anında başlatılması,

	a. `mydhclient` isimli, çalıştırılabilir, `/etc/init.d/` konumunda şu içerikle bir dosya üret: [gist-466496](http://gist.github.com/466496)

	b. bunu başlangıçta başaltabilmek için `$ sudo update-rc.d mydhclient defaults 99 90` komutunu çalıştır. 

	c. Eğer başlangıçta çalışmasını (ileride) engellemek istersen `$ sudo update-rc.d -f mydhclient remove` komutu yeterlidir.

## Kaynaklar

1. <http://lastkth-en.blogspot.com/2008/04/virtualbox-clone-virtual-machine-ubuntu.html>
2. <http://www.virtualbox.org/ticket/4038>
3. <http://www.virtualbox.org/ticket/660>
4. <http://www.linuxquestions.org/questions/linux-newbie-8/dhclient-needed-every-time-i-boot-to-get-internet-335955/>
5. <http://www.debian-administration.org/article/Making_scripts_run_at_boot_time_with_Debian>

